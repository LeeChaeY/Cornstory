<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE mapper
		PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
		"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!--	
	UserMapper.xml :: SQL 를 갖는 MetaData 
	
	- MyBatis Framework 은 XML MetaData 를 사용 SQL구문을 관리
	  (SQL은 xml 을 통해 적절히 캡슐화 되어 애플리케이선 외부로 분리함)
	- SQL문의 입력(?) / 출력(?)을 매핑한다.  <== 아래의 select element 참조
 -->		
 					
<mapper namespace="com.cornstory.service.product.ProductDao">

	<!-- 위의  namespace 이용 Application 에서 UserMapper.~~ 로 아래의 SQL 을 참조  
	 	  :: 아래의 query 수행 후 결과 resultType 에 선언된 User Domain Object 
	 	   	  Field ( property )에 자동연결(?,바인딩)
	 	  :: SQL / Query 의 Alias 와 User Domain Object 의 Field 이름 동일한 것 확인.  -->
  	
  	<resultMap type="com.cornstory.domain.Product" id="productSelectMap">
  		<result property="prodNo" column="prod_no" jdbcType="INT"/>
  		<result property="workNo" column="work_no" jdbcType="INT"/>
  		<result property="episodeNo" column="episode_no" jdbcType="INT"/>
  		<result property="userId" column="user_id" jdbcType="VARCHAR"/>
  		<result property="prodCategory" column="prod_category" jdbcType="INT"/>
  		<result property="prodName" column="prod_name" jdbcType="VARCHAR"/>
  		<result property="prodPrice" column="prod_price" jdbcType="INT"/>
  		<result property="prodCnt" column="prod_cnt" jdbcType="INT"/>
  		<result property="prodImage" column="prod_image" jdbcType="VARCHAR"/>
  		<result property="prodDate" column="prod_date" jdbcType="DATE"/>
  	</resultMap>
  	
  	<insert id="addProduct" parameterType="com.cornstory.domain.Product">
		INSERT 
		INTO PRODUCT (user_id, prod_category, prod_name, prod_price, prod_cnt, prod_image, prod_date)
		VALUES (
					#{userId}, 
					#{prodCategory}, 
					#{prodName}, 
					#{prodPrice}, 
					#{prodCnt}, 
					#{prodImage}, 
					STR_TO_DATE(SYSDATE, '%Y-%m-%d')));	
  	</insert>
  	
  	
</mapper>